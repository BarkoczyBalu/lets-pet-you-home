<header>
  <button *ngIf="petService.viewState === 'breed'" class="back" (click)="changeToPetView()"><i class="fa-solid fa-arrow-left"></i></button>
  <h2>Lets Pet You Home</h2>
</header>
<main>
  <!-- <ng-container *ngIf="pets.length < 1">
    <div class="no-pet">
      <h1 class="no-pet-text">Let's add a new pajt√°s</h1>
    </div>
  </ng-container> -->
  <ng-container *ngFor="let pet of pets">
    <app-pet-card #petView *ngIf="petService.viewState === 'pet' && pet && pet.total > 0" [pet]="pet" (stateChange)="changeToBreedView($event)"></app-pet-card>
  </ng-container>
  <ng-container *ngFor="let breed of selectedPet?.breeds">
    <app-pet-card #breedView *ngIf="petService.viewState === 'breed' && breed && breed.counter > 0" [breed]="breed" (stateChange)="changeToBreedView($event)"></app-pet-card>
  </ng-container>
  <button type="button" 
    class="btn btn-primary add-pet"
    data-bs-toggle="offcanvas" 
    data-bs-target="#offcanvasBottom" 
    aria-controls="offcanvasBottom"
  >
    <i class="fa-solid fa-paw"></i>
  </button>
</main>

<!-- Offcanvas -->
<div class="offcanvas offcanvas-bottom bg-primary" tabindex="-1" id="offcanvasBottom" aria-labelledby="offcanvasBottomLabel">
  <div class="offcanvas-header justify-content-center">
    <h5 class="offcanvas-title" id="offcanvasBottomLabel">Add New Pet</h5>
  </div>
  <div class="offcanvas-body">
    <div class="badge-list">
      <span *ngFor="let pet of pets" 
        [ngClass]="{'badge-selected': selectedPet.id === pet.id, 'bg-secondary': selectedPet.id !== pet.id}" 
        class="badge rounded-pill"
        (click)="changePets(pet.id)">
        <i [class]="'fa-solid fa-' + pet.icon"></i>
        {{ pet.name }}
      </span>
    </div>
    <div class="breed-card-row">
      <div *ngFor="let breed of selectedPet?.breeds" class="card text-center text-white" [ngClass]="{'card-selected': isSelectedBreed(breed)}" (click)="selectBreed(breed)">
        <img [src]="breed.img" class="card-img-top rounded-circle">
        <div class="card-body">
          <h5 class="card-title">{{ breed.name }}</h5>
        </div>
      </div>
    </div>
    <div class="d-grid">
      <button class="btn btn-secondary" data-bs-dismiss="offcanvas" [disabled]="selectedBreeds.length < 1" (click)="addBreed()">Add</button>
    </div>
  </div>
</div>